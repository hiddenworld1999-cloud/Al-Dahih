<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <script>
        if (localStorage.getItem('isLoggedInDaheeh') !== 'true') {
            window.location.href = 'login.html';
        }
        document.addEventListener('contextmenu', event => event.preventDefault());
        document.addEventListener('keydown', function(e) {
            if (e.key === 'PrintScreen' || (e.ctrlKey && (e.key === 's' || e.key === 'c' || e.key === 'p' || e.key === 'u'))) {
                alert('Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ù…Ø­Ù…ÙŠ.');
                e.preventDefault();
            }
        });
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¯Ø­ÙŠØ­ - Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</title>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Arabic:wght@400;500;700;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <style>
        /* === Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø°ÙƒÙŠØ© Ù„Ù„Ø£Ù„ÙˆØ§Ù† (Ø¹Ø´Ø§Ù† Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ) === */
        :root { 
            --primary-blue: #0A2647; 
            --accent-orange: #FFC800; 
            
            /* Ø£Ù„ÙˆØ§Ù† Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ÙØ§ØªØ­ (Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ) */
            --bg-main: #F8F9FA; 
            --bg-card: #ffffff;
            --text-main: #212529;
            --text-grey: #6c757d;
            --title-color: #0A2647;
            --card-shadow: 0 4px 12px rgba(0,0,0,0.08);
            --nav-inactive: #adb5bd;
        }

        /* Ø£Ù„ÙˆØ§Ù† Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ (Dark Mode) */
        body.dark-mode {
            --bg-main: #121212; 
            --bg-card: #1E1E1E;
            --text-main: #E8EAED;
            --text-grey: #9AA0A6;
            --title-color: #FFC800; /* Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† Ø¨ØªØ¨Ù‚Ù‰ Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ ÙÙŠ Ø§Ù„Ø¯Ø§Ø±Ùƒ Ù…ÙˆØ¯ Ø´ÙƒÙ„Ù‡Ø§ ØªØ­ÙØ© */
            --card-shadow: 0 4px 12px rgba(0,0,0,0.5);
            --nav-inactive: #5f6368;
        }

        .material-icons { font-family: 'Material Icons'; font-weight: normal; font-size: 24px; display: inline-block; line-height: 1; direction: ltr; }
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; transition: background-color 0.3s, color 0.3s; /* ØªØ£Ø«ÙŠØ± Ù†Ø§Ø¹Ù… Ø¹Ù†Ø¯ ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø£Ù„ÙˆØ§Ù† */ }
        body { font-family: 'IBM Plex Sans Arabic', sans-serif; background-color: var(--bg-main); color: var(--text-main); padding-bottom: 80px; overflow-x: hidden; user-select: none; -webkit-user-select: none; }
        
        .page-section { display: none; animation: fadeIn 0.3s ease; }
        .page-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
        .app-header { display: flex; justify-content: space-between; align-items: center; padding: 15px 20px; background: var(--bg-card); position: sticky; top: 0; z-index: 100; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .logo-text { font-size: 1.3rem; font-weight: 700; color: var(--title-color); display: flex; align-items: center; }
        .logo-icon { margin-left: 8px; color: var(--accent-orange); font-size: 28px; }
        .header-icons { display: flex; align-items: center; gap: 15px; }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø®Ø¨Ø§Ø± */
        .news-ticker { background: var(--accent-orange); display: flex; align-items: center; padding: 8px 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .news-ticker .material-icons { color: #0A2647; font-size: 22px; margin-left: 10px; }
        .news-ticker marquee { color: #0A2647; font-weight: 700; font-size: 0.95rem; padding-top: 3px; }

        .hero-section { padding: 20px 20px 30px 20px; background: var(--bg-card); border-bottom-left-radius: 25px; border-bottom-right-radius: 25px; box-shadow: 0 4px 15px rgba(0,0,0,0.03); }
        .search-input { width: 100%; padding: 14px 45px 14px 20px; border: none; border-radius: 15px; background: var(--bg-main); color: var(--text-main); font-size: 0.95rem; }
        .search-input::placeholder { color: var(--text-grey); }
        .search-container { position: relative; }
        .search-icon-inside { position: absolute; right: 15px; top: 50%; transform: translateY(-50%); color: var(--title-color); opacity: 0.6; }
        
        .container { padding: 0 20px; }
        .section-title { font-size: 1.1rem; margin: 25px 0 15px 0; color: var(--title-color); }
        
        .recently-added-card { background: var(--bg-card); border-radius: 18px; padding: 15px; display: flex; align-items: center; box-shadow: var(--card-shadow); margin-bottom: 20px; cursor: pointer; }
        .ra-icon-container { width: 60px; height: 60px; background: rgba(255, 200, 0, 0.15); border-radius: 14px; display: flex; justify-content: center; align-items: center; margin-left: 15px; color: var(--accent-orange); }
        .ra-content { flex: 1; }
        .ra-title { font-size: 1rem; margin-bottom: 4px; color: var(--title-color); font-weight: 700;}
        .ra-subtitle { font-size: 0.85rem; color: var(--text-grey); margin-bottom: 8px; }
        .ra-date { font-size: 0.75rem; color: var(--text-grey); display: flex; align-items: center; }

        .course-card-vertical { background: var(--bg-card); border-radius: 18px; overflow: hidden; margin-bottom: 18px; box-shadow: var(--card-shadow); display: flex; cursor: pointer; }
        .cc-v-image { width: 110px; object-fit: cover; }
        .cc-v-content { padding: 15px; flex: 1; display: flex; flex-direction: column; justify-content: space-between; }
        .rating-badge { background: rgba(255, 200, 0, 0.15); color: #d4a600; padding: 4px 8px; border-radius: 8px; font-weight: 700; font-size: 0.85rem; display: flex; align-items: center; }

        .profile-card { background: var(--bg-card); padding: 30px; border-radius: 20px; text-align: center; box-shadow: var(--card-shadow); margin-top: 20px; }
        .logout-btn { width: 100%; padding: 15px; background: #ff4d4d; color: white; border: none; border-radius: 12px; font-weight: 700; font-family: inherit; margin-top: 20px; cursor: pointer; }

        .bottom-nav { position: fixed; bottom: 0; left: 0; width: 100%; background: var(--bg-card); display: flex; justify-content: space-around; padding: 12px 0; box-shadow: 0 -4px 15px rgba(0,0,0,0.06); z-index: 200; border-top-left-radius: 20px; border-top-right-radius: 20px; }
        .nav-item { display: flex; flex-direction: column; align-items: center; font-size: 0.75rem; color: var(--nav-inactive); flex: 1; cursor: pointer; }
        .nav-item.active { color: var(--title-color); font-weight: 700; }

        .player-header { padding: 15px; display: flex; align-items: center; background: var(--bg-card); box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .back-btn { font-size: 24px; color: var(--title-color); cursor: pointer; padding: 5px; }
        .course-details-header { padding: 25px 20px; background: var(--bg-card); margin-bottom: 25px; }
        .qb-button { padding: 20px; border-radius: 16px; border: none; font-family: inherit; font-size: 1.1rem; font-weight: 700; display: flex; align-items: center; justify-content: space-between; cursor: pointer; width: 100%; margin-bottom: 15px; box-shadow: var(--card-shadow); }
        
        .qb-btn-answers { background: var(--accent-orange); color: #0A2647; }
        .qb-btn-no-answers { background: transparent; color: var(--title-color); border: 2px solid var(--title-color); }

        /* === ØªÙ†Ø³ÙŠÙ‚Ø§Øª Ø§Ù„Ù…Ø°ÙƒØ±Ø© === */
        .image-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.98); z-index: 500; display: none; flex-direction: column; }
        .modal-header { padding: 15px; background: #000; display: flex; justify-content: space-between; align-items: center; z-index: 601; border-bottom: 1px solid #333; }
        .close-img-btn { color: white; background: #d32f2f; border: none; padding: 8px 20px; border-radius: 15px; font-weight: bold; cursor: pointer; }
        
        .images-scroll-container { flex: 1; overflow-y: auto; width: 100%; padding: 10px; display: flex; flex-direction: column; align-items: center; position: relative; background: #f0f0f0; }
        .protected-img { max-width: 100%; margin-bottom: 15px; border-radius: 4px; pointer-events: none; -webkit-user-drag: none; display: block; background: white; box-shadow: 0 2px 5px rgba(0,0,0,0.1); z-index: 1; }

        /* Ø§Ù„Ø¹Ù„Ø§Ù…Ø© Ø§Ù„Ù…Ø§Ø¦ÙŠØ© */
        .watermark-overlay { position: absolute; top: 0; left: 0; width: 100%; pointer-events: none; display: flex; flex-wrap: wrap; justify-content: center; align-content: flex-start; overflow: hidden; z-index: 600; }
        .watermark-text { color: rgba(0, 0, 0, 0.10); font-size: 24px; font-weight: 900; transform: rotate(-45deg); padding: 80px; white-space: nowrap; text-shadow: none; }
    </style>
</head>
<body>
    <header class="app-header" id="mainHeader">
        <div class="logo-text"><span class="material-icons logo-icon">local_library</span>Ø§Ù„Ø¯Ø­ÙŠØ­</div>
        <div class="header-icons">
            <span class="material-icons" id="darkModeToggle" style="color:var(--title-color); font-size: 28px; cursor:pointer;" onclick="toggleDarkMode()">dark_mode</span>
            <span class="material-icons" style="color:var(--title-color); font-size: 28px; cursor:pointer;" onclick="switchTab('profile', document.querySelectorAll('.nav-item')[3])">account_circle</span>
        </div>
    </header>

    <div class="news-ticker">
        <span class="material-icons">campaign</span>
        <marquee direction="right" scrollamount="5">
            ğŸ”¥ Ø¹Ø§Ø¬Ù„: ØªÙ… Ø±ÙØ¹ Ù…Ø±Ø§Ø¬Ø¹Ø© Ù„ÙŠÙ„Ø© Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ Ø§Ù„ÙƒÙ„ÙŠ.. Ø¨Ø§Ù„ØªÙˆÙÙŠÙ‚ ÙŠØ§ Ø¯Ø­ÙŠØ­Ø©! ğŸš€
        </marquee>
    </div>

    <div id="page-home" class="page-section active">
        <section class="hero-section">
            <div class="welcome-text"><h2 style="color: var(--title-color);">Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ ÙŠØ§ Ø¯Ø­ÙŠØ­ ğŸ‘‹</h2><p style="color: var(--text-grey);">Ø¬Ø§Ù‡Ø² Ù„Ø¬Ø±Ø¹Ø© ØªØ±ÙƒÙŠØ² Ø§Ù„ÙŠÙˆÙ…ØŸ</p></div>
            <div class="search-container" style="margin-top: 15px;"><span class="material-icons search-icon-inside">search</span><input type="text" id="searchInput" class="search-input" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø§Ø¯Ø©..."></div>
        </section>
        
        <div class="container">
            <h3 class="section-title">Ø£Ø­Ø¯Ø« Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª</h3>
            <div class="recently-added-card" onclick="alert('Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ù‚Ø±ÙŠØ¨Ø§Ù‹')">
                <div class="ra-icon-container"><span class="material-icons" style="font-size: 32px;">new_releases</span></div>
                <div class="ra-content"><h4 class="ra-title">Ù…Ø±Ø§Ø¬Ø¹Ø© Ù„ÙŠÙ„Ø© Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† - Ø§Ù‚ØªØµØ§Ø¯ ÙƒÙ„ÙŠ</h4><p class="ra-subtitle">Ù…Ù„Ø®Øµ Ø´Ø§Ù…Ù„ Ù„Ø£Ù‡Ù… Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</p><div class="ra-date"><span class="material-icons" style="font-size: 14px; margin-left: 4px;">access_time</span>Ù…Ù†Ø° Ø³Ø§Ø¹ØªÙŠÙ†</div></div>
            </div>

            <h3 class="section-title">Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©</h3>
            <div id="coursesListContainer"></div>
        </div>
    </div>

    <div id="page-courses" class="page-section">
        <div class="container"><h3 class="section-title" style="margin-top:20px">Ø¯ÙˆØ±Ø§ØªÙŠ Ø§Ù„Ù…Ø³Ø¬Ù„Ø©</h3><div style="text-align:center; padding:50px 0; color:var(--text-grey);"><span class="material-icons" style="font-size:60px;">school</span><p>Ø£Ù†Øª Ù…Ø´ØªØ±Ùƒ ÙÙŠ 5 Ø¯ÙˆØ±Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹</p></div></div>
    </div>

    <div id="page-profile" class="page-section">
        <div class="container">
            <div class="profile-card">
                <span class="material-icons" style="font-size: 70px; color: var(--title-color);">account_circle</span>
                <h2 id="profileName" style="margin-top:10px; color: var(--title-color);">...</h2>
                <p id="profileCode" style="color:var(--text-grey)">...</p>
                <button class="logout-btn" onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
            </div>
        </div>
    </div>

    <div id="page-player" class="page-section" style="position:fixed; top:0; left:0; width:100%; height:100%; background:var(--bg-main); z-index:300; display:none; overflow-y: auto;">
        <div class="player-header"><span class="material-icons back-btn" onclick="closePlayer()">arrow_forward</span><span style="margin-right:15px; font-weight:700; color: var(--title-color);">Ø¨Ù†Ùƒ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©</span></div>
        <div class="course-details-header">
            <h2 id="playerCourseTitle" style="color: var(--title-color); margin-bottom: 5px;"></h2>
            <p id="playerInstructor" style="color: var(--text-grey); font-size: 0.9rem;"></p>
        </div>
        <div class="container">
            <h3 class="section-title">Ø§Ø®ØªØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù…Ø°Ø§ÙƒØ±Ø©</h3>
            <button class="qb-button qb-btn-answers" onclick="showProtectedImage('answers')"><div><div style="margin-bottom: 5px;">Ø£Ø³Ø¦Ù„Ø© Ø¨Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª</div><div style="font-size: 0.85rem; opacity: 0.8;">Ù„Ù„Ù…Ø°Ø§ÙƒØ±Ø© ÙˆØ§Ù„ÙÙ‡Ù… Ø§Ù„Ø¹Ù…ÙŠÙ‚</div></div><span class="material-icons">fact_check</span></button>
            <button class="qb-button qb-btn-no-answers" onclick="showProtectedImage('questions')"><div><div style="margin-bottom: 5px;">Ø£Ø³Ø¦Ù„Ø© Ø¨Ø¯ÙˆÙ† Ø¥Ø¬Ø§Ø¨Ø§Øª</div><div style="font-size: 0.85rem; color: var(--text-grey);">Ù„Ø§Ø®ØªØ¨Ø§Ø± Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ</div></div><span class="material-icons">quiz</span></button>
        </div>
    </div>

    <div id="imageModal" class="image-modal">
        <div class="modal-header">
            <button class="close-img-btn" onclick="closeImageModal()">Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø®Ù„Ù</button>
            <span style="color: white; font-weight: bold; font-size: 0.9rem;">Ø§Ø³Ø­Ø¨ Ù„Ù„Ø£Ø³ÙÙ„ Ù„Ù„Ù‚Ø±Ø§Ø¡Ø©</span>
        </div>
        
        <div class="images-scroll-container" id="imagesWrapper">
            <div id="watermarkOverlay" class="watermark-overlay"></div>
        </div>
    </div>

    <nav class="bottom-nav" id="bottomNav">
        <div class="nav-item active" onclick="switchTab('home', this)"><span class="material-icons">home</span><span>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span></div>
        <div class="nav-item" onclick="switchTab('courses', this)"><span class="material-icons">menu_book</span><span>Ø¯ÙˆØ±Ø§ØªÙŠ</span></div>
        <div class="nav-item" onclick="switchTab('home', this); document.getElementById('searchInput').focus();"><span class="material-icons">search</span><span>Ø¨Ø­Ø«</span></div>
        <div class="nav-item" onclick="switchTab('profile', this)"><span class="material-icons">person</span><span>Ø­Ø³Ø§Ø¨ÙŠ</span></div>
    </nav>

    <script>
        // ==========================================
        // === ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ (Dark Mode) ===
        // ==========================================
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            const isDark = document.body.classList.contains('dark-mode');
            localStorage.setItem('daheehDarkMode', isDark);
            
            // ØªØºÙŠÙŠØ± Ø´ÙƒÙ„ Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© (Ø´Ù…Ø³ / Ù‚Ù…Ø±)
            document.getElementById('darkModeToggle').innerText = isDark ? 'light_mode' : 'dark_mode';
        }

        // Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ Ù„Ùˆ Ø§Ù„Ø·Ø§Ù„Ø¨ ÙƒØ§Ù† Ù…Ø´ØºÙ„Ù‡ Ù‚Ø¨Ù„ ÙƒØ¯Ù‡
        if (localStorage.getItem('daheehDarkMode') === 'true') {
            document.body.classList.add('dark-mode');
            document.getElementById('darkModeToggle').innerText = 'light_mode';
        }

        // ==========================================
        // === Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ§Ø¯ ===
        // ==========================================
        const coursesData = [
            { id: 1, title: "ØªØµÙ…ÙŠÙ… Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„Ø­Ø§Ø³Ø¨", instructor: "Ø¯. ØªØ§Ù…Ø± Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ§Øª", img: "https://placehold.co/200x300/0A2647/FFC800?text=Code", files: { answers: { prefix: "coding_ans_", count: 10 }, questions: { prefix: "coding_q_", count: 10 } } },
            { id: 2, title: "Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ© Ù„Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§", instructor: "Ù…. Ø¹Ù„ÙŠ Ø§Ù„Ø´Ø¨ÙƒØ§Øª", img: "https://placehold.co/200x300/FFC800/0A2647?text=Network", files: { answers: { prefix: "net_ans_", count: 15 }, questions: { prefix: "net_q_", count: 15 } } },
            { id: 3, title: "Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ©", instructor: "Ø¯. Ù‡Ø§Ù„Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©", img: "https://placehold.co/200x300/0A2647/FFF?text=Strategy", files: { answers: { prefix: "strat_ans_", count: 10 }, questions: { prefix: "strat_q_", count: 10 } } },
            { id: 4, title: "Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ Ø§Ù„ÙƒÙ„ÙŠ", instructor: "Ø¯. ÙˆØ§Ø¦Ù„ Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ÙŠ", img: "https://placehold.co/200x300/FFC800/FFF?text=Macro", files: { answers: { prefix: "macro_ans_", count: 20 }, questions: { prefix: "macro_q_", count: 20 } } },
            { id: 5, title: "Ø§Ù„Ø¥Ø­ØµØ§Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ÙŠ", instructor: "Ø¯. Ø±Ø§Ù†ÙŠØ§ Ø§Ù„Ø£Ø±Ù‚Ø§Ù…", img: "https://placehold.co/200x300/0A2647/FFC800?text=Stats", files: { answers: { prefix: "stat_ans_", count: 12 }, questions: { prefix: "stat_q_", count: 12 } } }
        ];

        const studentName = localStorage.getItem('studentName') || "Ø·Ø§Ù„Ø¨";
        const studentCode = localStorage.getItem('studentCode') || "---";
        let currentCourse = null;

        document.getElementById('profileName').innerText = studentName;
        document.getElementById('profileCode').innerText = "ÙƒÙˆØ¯: " + studentCode;

        const container = document.getElementById('coursesListContainer');
        function renderCourses(list) {
            container.innerHTML = '';
            list.forEach(course => {
                container.innerHTML += `
                <div class="course-card-vertical" onclick="openPlayer(${course.id})">
                    <img src="${course.img}" class="cc-v-image">
                    <div class="cc-v-content">
                        <div><h4 style="color:var(--title-color); font-size:1rem;">${course.title}</h4><p style="color:var(--text-grey); font-size:0.85rem; margin-top:5px;">${course.instructor}</p></div>
                    </div>
                </div>`;
            });
        }

        document.getElementById('searchInput').addEventListener('input', (e) => {
            const term = e.target.value.toLowerCase();
            renderCourses(coursesData.filter(c => c.title.includes(term)));
        });

        function switchTab(tabName, element) {
            document.querySelectorAll('.page-section').forEach(p => { if(p.id !== 'page-player') p.classList.remove('active'); });
            document.getElementById('page-' + tabName).classList.add('active');
            if(element) {
                document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
                element.classList.add('active');
            }
        }

        function openPlayer(id) {
            currentCourse = coursesData.find(c => c.id === id);
            document.getElementById('playerCourseTitle').innerText = currentCourse.title;
            document.getElementById('playerInstructor').innerText = currentCourse.instructor;
            document.getElementById('page-player').style.display = 'block';
            document.getElementById('bottomNav').style.display = 'none';
            document.getElementById('mainHeader').style.display = 'none';
            document.querySelector('.news-ticker').style.display = 'none'; // Ù†Ø®ÙÙŠ Ø§Ù„Ø´Ø±ÙŠØ· ÙˆØ§Ø­Ù†Ø§ Ø¨Ù†Ø°Ø§ÙƒØ±
        }

        function closePlayer() {
            document.getElementById('page-player').style.display = 'none';
            document.getElementById('bottomNav').style.display = 'flex';
            document.getElementById('mainHeader').style.display = 'flex';
            document.querySelector('.news-ticker').style.display = 'flex'; // Ù†Ø¸Ù‡Ø± Ø§Ù„Ø´Ø±ÙŠØ· ØªØ§Ù†ÙŠ
        }

        function showProtectedImage(type) {
            const fileData = currentCourse.files[type]; 
            const modal = document.getElementById('imageModal');
            const imagesWrapper = document.getElementById('imagesWrapper');
            const watermarkContainer = document.getElementById('watermarkOverlay');

            const images = imagesWrapper.querySelectorAll('img');
            images.forEach(img => img.remove());
            
            for (let i = 1; i <= fileData.count; i++) {
                const imgName = fileData.prefix + i + '.jpg'; 
                
                const imgElement = document.createElement('img');
                imgElement.src = imgName;
                imgElement.className = 'protected-img';
                
                imgElement.onerror = function() {
                    imgElement.alt = 'ØµÙˆØ±Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©: ' + imgName;
                    imgElement.style.border = "1px solid red";
                    imgElement.style.padding = "20px";
                    imgElement.style.color = "white";
                };
                
                imagesWrapper.insertBefore(imgElement, watermarkContainer);
            }

            watermarkContainer.innerHTML = ''; 
            const watermarkText = `${studentName} - ${studentCode}`;
            for (let i = 0; i < 200; i++) {
                const span = document.createElement('div');
                span.className = 'watermark-text';
                span.innerText = watermarkText;
                watermarkContainer.appendChild(span);
            }

            modal.style.display = 'flex';
        }

        function closeImageModal() {
            document.getElementById('imageModal').style.display = 'none';
        }

        function logout() {
            localStorage.clear();
            window.location.href = 'login.html';
        }

        renderCourses(coursesData);
    </script>
</body>
</html>